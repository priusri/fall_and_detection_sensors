{% extends "base.html" %}
{% block content %}
<div class="card">
    <h2>Emergency Contacts</h2>
    <p>These contacts will be notified via SMS/Call when a fall is detected.</p>

    <div style="margin-top: 20px;">
        <h3>My Contacts</h3>
        {% if contacts %}
        <ul style="list-style: none; padding: 0;">
            {% for contact in contacts %}
            <li
                style="background: #f1f5f9; padding: 10px; margin-bottom: 10px; border-radius: 4px; display: flex; justify_content: space-between; align-items: center;">
                <div>
                    <strong>{{ contact.name }}</strong><br>
                    <span style="color: #64748b;">{{ contact.phone_number }}</span>
                </div>
                <form action="{{ url_for('main.delete_contact', contact_id=contact.id) }}" method="POST"
                    style="display:inline;">
                    <button type="submit"
                        style="background:none; border:none; color: #dc2626; cursor: pointer;">Remove</button>
                </form>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p style="color: #64748b; font-style: italic;">No contacts added yet.</p>
        {% endif %}
    </div>

    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid #e2e8f0;">

    <h3>Add New Contact</h3>
    <form method="POST" action="">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.name.label }}
            {{ form.name(size=32) }}
            {% if form.name.errors %}
            <span style="color: red;">
                {% for error in form.name.errors %}
                {{ error }}
                {% endfor %}
            </span>
            {% endif %}
        </div>
        <div class="form-group">
            {{ form.phone_number.label }}
            {{ form.phone_number(size=32, placeholder="+1234567890") }}
            {% if form.phone_number.errors %}
            <span style="color: red;">
                {% for error in form.phone_number.errors %}
                {{ error }}
                {% endfor %}
            </span>
            {% endif %}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn") }}
        </div>
    </form>
</div>
{% endblock %}